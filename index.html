<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>3D Dance Cube</title>

<style>
:root{
  /* Desktop */
  --cubeSize: min(520px, 82vw, 60vh);
  --half: calc(var(--cubeSize) / 2);

  /* Abstände */
  --gapScene: clamp(56px, 8vh, 110px);
  --gapHeadline: 56px;

  /* Schatten */
  --shadowW: calc(var(--cubeSize) * 0.82);
  --shadowH: calc(var(--cubeSize) * 0.14);
  --shadowBottom: calc(var(--cubeSize) * -0.08);
}

/* MOBILE: Würfel 1/3 kleiner + kompakt (meist 1 Screen, ohne Scrollen) */
@media (max-width: 900px) {
  :root{
    --cubeSize: calc(min(520px, 82vw, 60vh) * 0.6666667);
    --gapScene: clamp(18px, 3.2vh, 34px);
    --gapHeadline: 18px;
  }
}

html, body {
  margin: 0;
  height: 100%;
}

body {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;

  /* Boden füllt Screen */
  background: url("boden.jpg") center / cover no-repeat;
  font-family: system-ui, sans-serif;

  /* safe-area + rand */
  padding: max(18px, env(safe-area-inset-top)) max(18px, env(safe-area-inset-right))
           max(18px, env(safe-area-inset-bottom)) max(18px, env(safe-area-inset-left));
}

.scene {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--gapScene);
}

/* HEADLINE: floating + parallax-ready */
.headline {
  width: var(--cubeSize);
  margin-bottom: var(--gapHeadline);
  will-change: transform;
  transition: transform 180ms ease;
}
.headline img {
  width: 100%;
  height: auto;
  display: block;
}

/* Bühne */
.stage {
  position: relative;
  width: var(--cubeSize);
  height: var(--cubeSize);
  perspective: calc(var(--cubeSize) * 2.2);
}

/* Schatten: wird beim Würfeln animiert */
.shadow {
  position: absolute;
  bottom: var(--shadowBottom);
  left: 50%;
  width: var(--shadowW);
  height: var(--shadowH);
  transform: translateX(-50%) scale(1);
  background: radial-gradient(ellipse at center,
    rgba(0,0,0,0.45) 0%,
    rgba(0,0,0,0.25) 35%,
    rgba(0,0,0,0.10) 55%,
    rgba(0,0,0,0.00) 70%
  );
  filter: blur(6px);
  will-change: transform, opacity, filter;
  transition: transform 2.8s cubic-bezier(.18,.9,.25,1), opacity 2.8s cubic-bezier(.18,.9,.25,1), filter 2.8s cubic-bezier(.18,.9,.25,1);
}

/* Würfel */
.cube {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 2.8s cubic-bezier(.18,.9,.25,1);
  will-change: transform;
}

/* Seiten */
.face {
  position: absolute;
  width: var(--cubeSize);
  height: var(--cubeSize);
  background: #fff;
  border-radius: clamp(12px, 2.2vmin, 18px);
  overflow: hidden;
  /* kleines bisschen „premium“ */
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06);
}

.face img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  user-select: none;
  pointer-events: none;
}

/* 3D-Positionen */
.front  { transform: translateZ(var(--half)); }
.back   { transform: rotateY(180deg) translateZ(var(--half)); }
.right  { transform: rotateY(90deg) translateZ(var(--half)); }
.left   { transform: rotateY(-90deg) translateZ(var(--half)); }
.top    { transform: rotateX(90deg) translateZ(var(--half)); }
.bottom { transform: rotateX(-90deg) translateZ(var(--half)); }

/* Button */
button {
  padding: clamp(16px, 3.2vmin, 28px) clamp(34px, 7vmin, 80px);
  font-size: clamp(18px, 4.2vmin, 32px);
  font-weight: 800;
  letter-spacing: 0.12em;
  background: #000;
  color: #fff;
  border: none;
  border-radius: 999px;
  cursor: pointer;
  touch-action: manipulation;
  transition: transform 120ms ease, opacity 120ms ease;
}
button:hover { transform: scale(1.04); }
button:disabled { opacity: .6; cursor: default; transform: none; }

/* Optional: harte Fälle (sehr kleine Höhe) -> alles noch kompakter */
@media (max-height: 700px) and (max-width: 900px) {
  :root{
    --gapScene: 14px;
    --gapHeadline: 12px;
    --cubeSize: calc(min(520px, 84vw, 54vh) * 0.6666667);
  }
}
</style>
</head>

<body>

<div class="scene" id="scene">

  <div class="headline" id="headline">
    <img src="headline.png" alt="Headline">
  </div>

  <div class="stage">
    <div class="shadow" id="shadow"></div>

    <div class="cube" id="cube">
      <div class="face front"><img src="1.png" alt="1"></div>
      <div class="face right"><img src="2.png" alt="2"></div>
      <div class="face back"><img src="3.png" alt="3"></div>
      <div class="face left"><img src="4.png" alt="4"></div>
      <div class="face top"><img src="5.png" alt="5"></div>
      <div class="face bottom"><img src="6.png" alt="6"></div>
    </div>
  </div>

  <button id="rollBtn" type="button">WÜRFELN</button>
</div>

<script>
const cube = document.getElementById("cube");
const shadow = document.getElementById("shadow");
const headline = document.getElementById("headline");
const rollBtn = document.getElementById("rollBtn");

const rotations = {
  1: [0, 0],
  2: [0, -90],
  3: [0, 180],
  4: [0, 90],
  5: [-90, 0],
  6: [90, 0]
};

let rolling = false;

/* Headline „floating“ + mini-parallax (Desktop: Maus, Mobile: DeviceOrientation) */
(function headlineParallax(){
  const max = 10; // px
  let targetX = 0, targetY = 0;
  let curX = 0, curY = 0;

  function raf(){
    curX += (targetX - curX) * 0.12;
    curY += (targetY - curY) * 0.12;
    headline.style.transform = `translate3d(${curX}px, ${curY}px, 0)`;
    requestAnimationFrame(raf);
  }
  requestAnimationFrame(raf);

  // Desktop: Maus
  window.addEventListener("mousemove", (e) => {
    const cx = window.innerWidth / 2;
    const cy = window.innerHeight / 2;
    const dx = (e.clientX - cx) / cx;
    const dy = (e.clientY - cy) / cy;
    targetX = dx * max;
    targetY = dy * max;
  }, { passive: true });

  // Mobile: Gyro (wenn verfügbar)
  window.addEventListener("deviceorientation", (e) => {
    if (typeof e.gamma !== "number" || typeof e.beta !== "number") return;
    // gamma: links/rechts, beta: vor/zurück
    const gx = Math.max(-30, Math.min(30, e.gamma)) / 30;
    const gy = Math.max(-30, Math.min(30, e.beta)) / 30;
    targetX = gx * max;
    targetY = gy * max;
  }, { passive: true });
})();

/* Würfeln: langsame Rotation + Schatten „pumpt“ mit */
function roll() {
  if (rolling) return;
  rolling = true;
  rollBtn.disabled = true;

  const n = Math.floor(Math.random() * 6) + 1;
  const [x, y] = rotations[n];

  const spinX = x + 360 * (Math.floor(Math.random() * 3) + 2);
  const spinY = y + 360 * (Math.floor(Math.random() * 3) + 2);

  // Schatten: beim Würfeln etwas kleiner + härter (als ob Würfel „hochkommt“)
  shadow.style.transform = `translateX(-50%) scale(0.82)`;
  shadow.style.opacity = "0.7";
  shadow.style.filter = "blur(10px)";

  cube.style.transform = `rotateX(${spinX}deg) rotateY(${spinY}deg)`;

  // Zurück auf normal nach Ende der Animation (2.8s)
  setTimeout(() => {
    shadow.style.transform = `translateX(-50%) scale(1)`;
    shadow.style.opacity = "1";
    shadow.style.filter = "blur(6px)";
  }, 350);

  setTimeout(() => {
    rolling = false;
    rollBtn.disabled = false;
  }, 2850);
}

rollBtn.addEventListener("click", roll);

// Bonus: Spacebar am Desktop
window.addEventListener("keydown", (e) => {
  if (e.code === "Space") {
    e.preventDefault();
    roll();
  }
});
</script>

</body>
</html>
